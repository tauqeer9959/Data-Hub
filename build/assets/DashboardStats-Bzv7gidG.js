import{c as v,u as N,a as p,r as o,j as e,C as r,b as a,d as c,e as i,G as w,T as y,B as h,f as C,p as A}from"./index-BpTcuRSl.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],S=v("trophy",k);function G(){const{session:n}=N(),{currentLevel:d,getLevelDisplay:m}=p(),[t,j]=o.useState({totalSemesters:0,totalProjects:0,totalCertificates:0,overallGPA:0,totalSubjects:0,averageMarks:0,gradeDistribution:{"A+":0,"A-":0,"B+":0,"B-":0,"C+":0,"C-":0,"D+":0,"D-":0,F:0}}),[f,x]=o.useState(!0),u=async()=>{if(!n?.access_token){x(!1);return}x(!0);try{const s=await fetch(`https://${A}.supabase.co/functions/v1/make-server-0603cad1/dashboard/stats?educationLevel=${d}`,{headers:{Authorization:`Bearer ${n.access_token}`}});if(s.ok){const l=await s.json();j(l)}}catch(s){console.error("Error fetching dashboard stats:",s)}finally{x(!1)}};o.useEffect(()=>{u()},[n?.access_token,d]),o.useEffect(()=>{const s=()=>{u()};return window.addEventListener("dashboardRefresh",s),()=>window.removeEventListener("dashboardRefresh",s)},[n?.access_token,d]);const g=s=>s>=3.7?"bg-green-500":s>=3?"bg-blue-500":s>=2.3?"bg-yellow-500":s>=1.3?"bg-orange-500":"bg-red-500",b=s=>s>=4?"A+":s>=3.7?"A-":s>=3.3?"B+":s>=3?"B-":s>=2.7?"C+":s>=2.3?"C-":s>=2?"D+":s>=1.3?"D-":"F";return f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium",children:"Academic Overview"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loading data for ",m(d),"..."]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((s,l)=>e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Loading..."}),e.jsx("div",{className:"h-4 w-4 bg-muted rounded"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"h-8 w-16 bg-muted rounded mb-1"}),e.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]})]},l))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium",children:"Academic Overview"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing data for ",m(d)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Total Semesters"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalSemesters}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Academic progress"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Overall GPA"}),e.jsx(y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:t.overallGPA.toFixed(2)}),e.jsx(h,{variant:"secondary",className:`text-white ${g(t.overallGPA)}`,children:b(t.overallGPA)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cumulative grade point average"})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Total Subjects"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalSubjects||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average: ",t.averageMarks?.toFixed(1)||0,"%"]})]})]}),e.jsxs(r,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm",children:"Projects & Certificates"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalProjects+t.totalCertificates}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.totalProjects," projects, ",t.totalCertificates," certificates"]})]})]})]}),t.gradeDistribution&&t.totalSubjects&&t.totalSubjects>0&&e.jsxs(r,{children:[e.jsx(a,{children:e.jsx(c,{className:"text-sm",children:"Grade Distribution"})}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-9 gap-3",children:Object.entries(t.gradeDistribution).map(([s,l])=>e.jsxs("div",{className:"text-center",children:[e.jsx(h,{variant:"outline",className:"w-full mb-1",children:String(s)}),e.jsx("div",{className:"text-sm font-medium",children:Number(l)||0})]},s))})})]})]})}export{G as DashboardStats};
