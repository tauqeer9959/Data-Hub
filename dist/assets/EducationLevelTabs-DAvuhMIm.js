import{c as m,p as x,u as j,r as d,j as e,C as p,b,d as v,P as h,o as g,e as f,Q as w,V as C,g as y,W as N,X as A,Y as D,Z as E,_ as T,$ as k,a0 as B,t as o,a as L,B as M,i as F,k as P,l as S,G as _,f as $}from"./index-DwFtUS-7.js";import{T as u}from"./trash-2-DR-DX5in.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]],O=m("microscope",I);async function V(l){try{const s=await fetch(`https://${x}.supabase.co/functions/v1/make-server-0603cad1/education/bachelor/clear`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(!s.ok){const c=await s.json();throw new Error(c.error||"Failed to clear bachelor data")}return await s.json()}catch(s){throw console.error("Error clearing bachelor data:",s),s}}function Y({onDataCleared:l}){const{session:s}=j(),[a,c]=d.useState(!1),[i,n]=d.useState(!1),r=async()=>{if(!s?.access_token){o.error("Authentication required");return}c(!0);try{const t=await V(s.access_token);if(t.success)o.success(`Successfully cleared ${t.deletedSemesters} semesters and ${t.deletedSubjects} subjects`,{description:"All bachelor's level data has been removed",duration:5e3}),n(!1),l&&l(),window.dispatchEvent(new CustomEvent("dashboardRefresh"));else throw new Error("Failed to clear data")}catch(t){console.error("Error clearing bachelor data:",t),o.error("Failed to clear bachelor data",{description:t instanceof Error?t.message:"An unexpected error occurred"})}finally{c(!1)}};return e.jsxs(p,{className:"border-destructive/20 bg-destructive/5",children:[e.jsxs(b,{children:[e.jsxs(v,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(h,{className:"h-5 w-5"}),"Clear Bachelor's Data"]}),e.jsx(g,{children:"Permanently remove all semesters and subjects from your bachelor's degree records. This action cannot be undone."})]}),e.jsx(f,{children:e.jsxs(w,{open:i,onOpenChange:n,children:[e.jsx(C,{asChild:!0,children:e.jsxs(y,{variant:"destructive",className:"w-full",disabled:a,children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Clear All Bachelor's Data"]})}),e.jsxs(N,{children:[e.jsxs(A,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-destructive"}),"Confirm Data Deletion"]}),e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"This action is irreversible!"})," You are about to permanently delete:"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"All bachelor's degree semesters"}),e.jsx("li",{children:"All subjects and grades within those semesters"}),e.jsx("li",{children:"All calculated GPAs for those semesters"})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Your master's and PhD data (if any) will remain untouched."}),e.jsx("div",{children:"Are you absolutely sure you want to proceed?"})]})})]}),e.jsxs(T,{children:[e.jsx(k,{disabled:a,children:"Cancel"}),e.jsx(B,{onClick:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Clearing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Yes, Clear All Data"]})})]})]})]})})]})}function R({className:l,onDataCleared:s}){const{currentLevel:a,setCurrentLevel:c,getLevelDisplay:i}=L(),n=[{value:"bachelor",label:"Bachelor's",icon:e.jsx(_,{className:"h-4 w-4"})},{value:"master",label:"Master's",icon:e.jsx($,{className:"h-4 w-4"})},{value:"phd",label:"PhD",icon:e.jsx(O,{className:"h-4 w-4"})}];return e.jsxs("div",{className:l,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Education Level"}),e.jsx(M,{variant:"outline",className:"text-xs",children:i(a)})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{value:a,onValueChange:r=>{c(r),window.dispatchEvent(new CustomEvent("dashboardRefresh"))},className:"w-full",children:e.jsx(P,{className:"grid w-full grid-cols-3",children:n.map(r=>e.jsxs(S,{value:r.value,className:"flex items-center gap-2",children:[r.icon,e.jsx("span",{className:"hidden sm:inline",children:r.label}),e.jsx("span",{className:"sm:hidden",children:r.value.toUpperCase()})]},r.value))})}),a==="bachelor"&&e.jsx(Y,{onDataCleared:s})]})]})}export{R as E};
