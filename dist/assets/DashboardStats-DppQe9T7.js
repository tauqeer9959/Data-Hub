import{c as g,u as p,a as N,r as i,j as e,C as a,b as c,d,e as n,G as b,T as w,B as y,f as C,p as A}from"./index-xKifkbJu.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],P=g("trophy",k);function L(){const{session:l}=p(),{currentLevel:r,getLevelDisplay:m}=N(),[t,u]=i.useState({totalSemesters:0,totalProjects:0,totalCertificates:0,overallGPA:0}),[f,o]=i.useState(!0),h=async()=>{if(!l?.access_token){o(!1);return}o(!0);try{const s=await fetch(`https://${A}.supabase.co/functions/v1/make-server-0603cad1/dashboard/stats?educationLevel=${r}`,{headers:{Authorization:`Bearer ${l.access_token}`}});if(s.ok){const x=await s.json();u(x)}}catch(s){console.error("Error fetching dashboard stats:",s)}finally{o(!1)}};i.useEffect(()=>{h()},[l?.access_token,r]),i.useEffect(()=>{const s=()=>{h()};return window.addEventListener("dashboardRefresh",s),()=>window.removeEventListener("dashboardRefresh",s)},[l?.access_token,r]);const j=s=>s>=3.7?"bg-green-500":s>=3?"bg-blue-500":s>=2.3?"bg-yellow-500":s>=1.3?"bg-orange-500":"bg-red-500",v=s=>s>=4?"A+":s>=3.7?"A-":s>=3.3?"B+":s>=3?"B-":s>=2.7?"C+":s>=2.3?"C-":s>=2?"D+":s>=1.3?"D-":"F";return f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium",children:"Academic Overview"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loading data for ",m(r),"..."]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((s,x)=>e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm",children:"Loading..."}),e.jsx("div",{className:"h-4 w-4 bg-muted rounded"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"h-8 w-16 bg-muted rounded mb-1"}),e.jsx("div",{className:"h-4 w-20 bg-muted rounded"})]})]},x))})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium",children:"Academic Overview"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing data for ",m(r)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm",children:"Total Semesters"}),e.jsx(b,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalSemesters}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Academic progress"})]})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm",children:"Overall GPA"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:t.overallGPA.toFixed(2)}),e.jsx(y,{variant:"secondary",className:`text-white ${j(t.overallGPA)}`,children:v(t.overallGPA)})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cumulative grade point average"})]})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm",children:"Projects"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalProjects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Portfolio projects"})]})]}),e.jsxs(a,{children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm",children:"Certificates"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalCertificates}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Earned certificates"})]})]})]})]})}export{L as DashboardStats};
